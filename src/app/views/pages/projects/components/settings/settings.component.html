<div *ngIf="selectedItem" class="row">
    <div class="col-lg-12 col-md-12 col-sm-12 stretch-card">
        <div class="card">
            <div class="card-header">
                Configuraciones de proyecto
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-lg-5 col-md-5 col-sm-12 stretch-card">
                        <div class="card">
                            <div class="card-header">
                                Total de días no laboral: {{selectedItem.totalFreeDays == 1 ? selectedItem.totalFreeDays+' día': selectedItem.totalFreeDays+' días' }} 
                            </div>
                            <div class="card-body">
                                <form name="addFreeDaysForm" #addFreeDaysForm="ngForm"
                                    (ngSubmit)="addFreeDays(addFreeDaysForm)">
                                    <div class="row">
                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                            <div class="row">

                                                <!-- VINCULAR DIAS LIBRES AL PROYECTO  -->
                                                <div class="col-lg-12 col-md-12 col-sm-12">
                                                    <div class="row">
                                                        <div class="col-lg-12">
                                                            <div *ngIf="inputError"
                                                                class="invalid-feedback text-center pt-0 pb-3 invalid-content-error">
                                                                <div [innerHtml]="inputError"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-lg-5 col-md-5 col-sm-12 col-xs-12">
                                                            <label for="inputStartDate" class="form-label">Fecha
                                                                inicio</label>
                                                            <div class="input-group">
                                                                <input id="inputStartDate" name="startDate"
                                                                    #startDateI="ngModel" [minDate]="minDate"
                                                                    class="form-control" placeholder="yyyy-mm-dd"
                                                                    [(ngModel)]="startDate" ngbDatepicker
                                                                    #dp1="ngbDatepicker"
                                                                    (ngModelChange)="changeDateFilter(startDateI,endDateI)"
                                                                    required>
                                                                <button class="input-group-text" type="button"
                                                                    (click)="dp1.toggle()">
                                                                    <i
                                                                        class="feather icon-calendar icon-md text-muted"></i>
                                                                </button>
                                                            </div>
                                                            <div *ngIf="startDateI.invalid && addFreeDaysForm.submitted"
                                                                class="invalid-feedback">
                                                                <div *ngIf="startDateI.errors?.required">Campo es
                                                                    requerido
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-5 col-md-5 col-sm-12 col-xs-12">
                                                            <label for="inputEndDate" class="form-label">Fecha
                                                                fin</label>
                                                            <div class="input-group">
                                                                <input id="inputEndDate" name="endDate"
                                                                    #endDateI="ngModel" [minDate]="minDate"
                                                                    class="form-control" placeholder="yyyy-mm-dd"
                                                                    [(ngModel)]="endDate" ngbDatepicker
                                                                    #dp2="ngbDatepicker"
                                                                    (ngModelChange)="changeDateFilter(startDateI,endDateI)"
                                                                    required>
                                                                <button class="input-group-text" type="button"
                                                                    (click)="dp2.toggle()">
                                                                    <i
                                                                        class="feather icon-calendar icon-md text-muted"></i>
                                                                </button>
                                                            </div>
                                                            <div *ngIf="endDateI.invalid && addFreeDaysForm.submitted"
                                                                class="invalid-feedback">
                                                                <div *ngIf="endDateI.errors?.required">Campo es
                                                                    requerido
                                                                </div>
                                                            </div>
                                                        </div>



                                                        <div
                                                            class="col-lg-2 col-md-2 col-sm-12 col-xs-12 d-flex  align-items-center">
                                                            <button type="submit" class="btn btn-primary btn-create-dt"
                                                                placement="bottom" ngbTooltip="Registrar fechas">
                                                                <i class="feather icon-plus"></i>
                                                            </button>
                                                        </div>

                                                    </div>
                                                    <div class="row">
                                                        <div class="col-lg-12 col-md-12 col-sm-12 mt-3">
                                                            <hr>
                                                        </div>
                                                        <div *ngIf="selectedItem.freeDays && selectedItem.freeDays.length > 0; else  messageDates"
                                                            class="col-lg-12 col-md-12 col-sm-12 mt-3">
                                                            <table class="table mt-3">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Fecha Inicio</th>
                                                                        <th>Fecha Fin</th>
                                                                        <th>Dia(s) Libre(s)</th>
                                                                        <th data-priority="1" class="text-center"></th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr *ngFor="let range of selectedItem.freeDays">
                                                                        <td>{{range.startDate | date:'YYYY-MM-dd'}}</td>
                                                                        <td>{{range.endDate | date:'YYYY-MM-dd'}}</td>
                                                                        <td>{{range.days}}</td>
                                                                        <td><i class="feather icon-trash ms-1 icon-members"
                                                                                (click)="deleteRange(range.id)"
                                                                                placement="start"
                                                                                ngbTooltip="Eliminar Fechas"></i></td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                        <ng-template #messageDates>
                                                            <div class="col-lg-12 col-md-12 col-sm-12 mt-3 text-center">
                                                                <p>El proyecto {{selectedItem.name}} tiene 0 dias libres</p>
                                                            </div>
                                                        </ng-template>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>

                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>