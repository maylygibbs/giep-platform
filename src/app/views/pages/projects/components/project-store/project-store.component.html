<div class="row">
    <div class="col-lg-12 col-md-12 stretch-card">
        <div class="card">
            <div class="card-body">
                <form name="projectForm" #projectForm="ngForm" (ngSubmit)="onSubmit(projectForm)" class="forms-sample range-selection">
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                            <div class="mb-3">
                                <label for="inputName" class="form-label">Titulo Proyecto</label>
                                <input type="text" name="name" #name="ngModel"
                                    [(ngModel)]="project.name"
                                    [ngClass]="{'ng-dirty ng-invalid' : name.errors && ( name.dirty || name.touched || projectForm.submitted) }"
                                    class="form-control" id="inputName" autocomplete="off" required>
                                <div *ngIf="name.invalid && projectForm.submitted" class="invalid-feedback">
                                    <div *ngIf="name.errors?.required">Campo es requerido</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                            <div class="mb-3">
                                <label for="inputDescription" class="form-label">Descripcion</label>
                                <input type="text" name="description" #description="ngModel"
                                    [(ngModel)]="project.description"
                                    [ngClass]="{'ng-dirty ng-invalid' : description.errors && ( description.dirty || description.touched || projectForm.submitted) }"
                                    class="form-control" id="inputDescription" autocomplete="off" required>
                                <div *ngIf="description.invalid && projectForm.submitted" class="invalid-feedback">
                                    <div *ngIf="description.errors?.required">Campo es requerido</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 d-flex ">
                                <div class="col-12">
                                    <div class="dp-hidden position-absolute">
                                        <div class="input-group">
                                            <input name="datepicker" class="form-control" ngbDatepicker #datepicker="ngbDatepicker"
                                                [autoClose]="'outside'" (dateSelect)="onDateSelection($event)" [displayMonths]="2" [dayTemplate]="t"
                                                outsideDays="hidden" [startDate]="project.startDate!" tabindex="-1">
                                            <ng-template #t let-date let-focused="focused">
                                                <span class="custom-day" [class.focused]="focused" [class.range]="isRange(date)"
                                                    [class.faded]="isHovered(date) || isInside(date)" (mouseenter)="hoveredDate = date"
                                                    (mouseleave)="hoveredDate = null">
                                                    {{ date.day }}
                                                </span>
                                            </ng-template>
                                        </div>
                                    </div>
                                    <div class="input-group">
                                        <input #dpStartDate class="form-control" placeholder="yyyy-mm-dd" name="dpStartDate"
                                            [value]="formatter.format(project.startDate)" (input)="project.startDate = validateInput(project.startDate, dpStartDate.value)">
                                        <button class="btn btn-outline-secondary calendar" (click)="datepicker.toggle()" type="button"></button>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="input-group">
                                        <input #dpEndDate class="form-control" placeholder="yyyy-mm-dd" name="dpEndDate"
                                            [value]="formatter.format(project.endDate)" (input)="project.endDate = validateInput(project.endDate, dpEndDate.value)">
                                        <button class="btn btn-outline-secondary calendar" (click)="datepicker.toggle()" type="button"></button>
                                    </div>
                                </div>
                                <!-- <div class="form-group hidden ">
                                    <div class="input-group">
                                        <input name="datepicker" class="form-control" ngbDatepicker #datepicker="ngbDatepicker" [autoClose]="'outside'"
                                            (dateSelect)="onDateSelection($event)" [displayMonths]="2" [dayTemplate]="t" outsideDays="hidden" (change)="onchangeDate($event)"
                                            [startDate]="startDate!">
                                        <ng-template #t let-date let-focused="focused">
                                            <span class="custom-day" [class.focused]="focused" [class.range]="isRange(date)"
                                                [class.faded]="isHovered(date) || isInside(date)" (mouseenter)="hoveredDate = date"
                                                (mouseleave)="hoveredDate = null">
                                                {{ date.day }}
                                            </span>
                                        </ng-template>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <div class="input-group" (click)="datepicker.toggle()">
                                        <input #dpStartDate class="form-control" placeholder="yyyy-mm-dd" name="dpStartDate"
                                            [value]="formatter.format(project.startDate)" (input)="project.startDate = validateInput(project.startDate, dpStartDate.value)" (change)="onchangeDate($event)" [(ngModel)]="project.startDate">
                                        <button class="input-group-text" type="button">
                                            <i class="feather icon-calendar icon-md text-muted"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="ms-2">
                                    <div class="input-group" (click)="datepicker.toggle()">
                                        <input #dpEndDate class="form-control" placeholder="yyyy-mm-dd" name="dpEndDate"
                                            [value]="formatter.format(project.endDate)" (input)="project.endDate = validateInput(project.endDate, dpEndDate.value)" (change)="onchangeDate($event)" [(ngModel)]="project.endDate">
                                        <button class="input-group-text" type="button">
                                            <i class="feather icon-calendar icon-md text-muted"></i>
                                        </button>
                                    </div>
                                </div> -->
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                            <div class="mb-3">
                                <label for="inputCompany" class="form-label">Empresa</label>
                                <ng-select id="inputCompany" [items]="data.Companies" name="company"
                                    #company="ngModel"
                                    [ngClass]="{'ng-dirty ng-invalid' : company.errors && ( company.dirty || company.touched || projectForm.submitted) }"
                                    [searchable]="false" (change)="onChangeCompany($event)"
                                    [(ngModel)]="project.company" required>
                                </ng-select>
                                <div *ngIf="company.invalid && projectForm.submitted"
                                    class="invalid-feedback">
                                    <div *ngIf="company.errors?.required">Campo es requerido
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                            <div class="mb-3">
                                <label for="inputProjectManagementOffice" class="form-label">PMO</label>
                                <ng-select id="inputProjectManagementOffice" [items]="data.users" name="projectManagementOffice"
                                    #projectManagementOffice="ngModel"
                                    [ngClass]="{'ng-dirty ng-invalid' : projectManagementOffice.errors && ( projectManagementOffice.dirty || projectManagementOffice.touched || projectForm.submitted) }"
                                    [searchable]="false" (change)="onChangeProjectManagementOffice($event)"
                                    [(ngModel)]="project.projectManagementOffice" required>
                                </ng-select>
                                <div *ngIf="projectManagementOffice.invalid && projectForm.submitted"
                                    class="invalid-feedback">
                                    <div *ngIf="projectManagementOffice.errors?.required">Campo es requerido
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12 col-md-12 text-right">
                            <button class="btn btn-secondary" (click)="back()">Cancelar</button>
                            <button type="submit" class="btn btn-primary ms-2 me-2">Guardar</button>
                        </div>
                    </div>

                </form>

            </div>
        </div>
    </div>
</div>